"use strict";(self.webpackChunkrecipe_app=self.webpackChunkrecipe_app||[]).push([[670],{1670:(Q,g,a)=>{a.r(g),a.d(g,{RecipesModule:()=>E});var r=a(2382),s=a(8588),Z=a(4466),C=a(5698),b=a(4004),e=a(1223),A=a(5599);let T=(()=>{class t{constructor(i,n){this._authService=i,this._router=n}canActivate(i,n){return this._authService.user.pipe((0,C.q)(1),(0,b.U)(c=>!!c||this._router.createUrlTree(["/auth"])))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(A.e),e.LFG(s.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),R=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-detail-default"]],decls:4,vars:0,consts:[[1,"row"],[1,"col-xs-12"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3,"Please, select a Recipe!"),e.qZA()()())},styles:["h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}"]}),t})();var u=a(8174),_=a(7915),m=a(3649),d=a(9808);const I=function(){return{display:"block"}};let D=(()=>{class t{constructor(){this.deleteData=new e.vpe}handleConfirmModal(){this.deleteData.emit(!0)}handleCancelModal(){this.deleteData.emit(!1)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-modal"]],inputs:{title:"title",message:"message"},outputs:{deleteData:"deleteData"},decls:15,vars:4,consts:[[1,"backdrop",3,"click"],["tabindex","-1","role","dialog",1,"modal","open",3,"ngStyle"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return n.handleCancelModal()}),e.qZA(),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e._uU(6),e.qZA()(),e.TgZ(7,"div",6)(8,"p"),e._uU(9),e.qZA()(),e.TgZ(10,"div",7)(11,"button",8),e.NdJ("click",function(){return n.handleConfirmModal()}),e._uU(12," Delete "),e.qZA(),e.TgZ(13,"button",9),e.NdJ("click",function(){return n.handleCancelModal()}),e._uU(14," Cancel "),e.qZA()()()()()),2&i&&(e.xp6(1),e.Q6J("ngStyle",e.DdM(3,I)),e.xp6(5),e.Oqu(n.title),e.xp6(3),e.Oqu(n.message))},directives:[d.PC],styles:[".backdrop[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,.75);z-index:50}"]}),t})(),y=(()=>{class t{constructor(i){this.elRef=i,this.isOpen=!1}toggleOpen(i){this.isOpen=!!this.elRef.nativeElement.contains(i.target)&&!this.isOpen}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(e.SBq))},t.\u0275dir=e.lG2({type:t,selectors:[["","appDropdown",""]],hostVars:2,hostBindings:function(i,n){1&i&&e.NdJ("click",function(p){return n.toggleOpen(p)},!1,e.evT),2&i&&e.ekj("open",n.isOpen)}}),t})();function M(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"app-modal",13),e.NdJ("deleteData",function(c){return e.CHM(i),e.oxw().handleCloserModal(c)}),e.qZA()}}function S(t,o){if(1&t&&(e.TgZ(0,"li",14),e._uU(1),e.qZA()),2&t){const i=o.$implicit;e.xp6(1),e.AsE(" ",i.name," - ",i.amount," ")}}let w=(()=>{class t{constructor(i,n,c,p,l){this._recipesService=i,this._route=n,this._router=c,this._alertService=p,this._dataStorageService=l,this.openModal=!1}ngOnInit(){this._sub=this._route.params.subscribe(i=>{this.id=+i.id,this.recipe=this._recipesService.getRecipeByIndex(this.id)})}ngOnDestroy(){this._sub&&this._sub.unsubscribe()}handleAddToShoppingList(){this._recipesService.addIngredientsToShoppingList(this.recipe.ingredients),this._dataStorageService.storeShoppingList(),this._alertService.show("Your ingredients added to Shopping List!")}handleEditRecipe(){this._router.navigate(["edit"],{relativeTo:this._route})}handleDeleteRecipe(){this.openModal=!0}_deleteRecipe(){this._recipesService.deleteRecipe(this.id),this._dataStorageService.storeRecipes(),this._router.navigate(["../"],{relativeTo:this._route})}handleCloserModal(i){i?(this._deleteRecipe(),this.openModal=!1):this.openModal=!1}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(u.v),e.Y36(s.gz),e.Y36(s.F0),e.Y36(_.c),e.Y36(m.Z))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-detail"]],decls:36,vars:6,consts:[["title","Delete recipe","message","Do you really want to delete this recipe?",3,"deleteData",4,"ngIf"],[1,"row"],[1,"col-xs-12"],[1,"img-responsive",2,"max-height","300px",3,"src","alt"],["appDropdown","",1,"btn-group"],["type","button",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[2,"cursor","pointer",3,"click"],[1,"row","Description"],[1,"Description-Text"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],["title","Delete recipe","message","Do you really want to delete this recipe?",3,"deleteData"],[1,"list-group-item"]],template:function(i,n){1&i&&(e.YNc(0,M,1,0,"app-modal",0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA()(),e.TgZ(4,"div",1)(5,"div",2)(6,"h1"),e._uU(7),e.qZA()()(),e.TgZ(8,"div",1)(9,"div",2)(10,"div",4)(11,"button",5),e._uU(12," Manage Recipe "),e._UZ(13,"span",6),e.qZA(),e.TgZ(14,"ul",7)(15,"li")(16,"a",8),e.NdJ("click",function(){return n.handleAddToShoppingList()}),e._uU(17," To Shopping List "),e.qZA()(),e.TgZ(18,"li")(19,"a",8),e.NdJ("click",function(){return n.handleEditRecipe()}),e._uU(20," Edit Recipe "),e.qZA()(),e.TgZ(21,"li")(22,"a",8),e.NdJ("click",function(){return n.handleDeleteRecipe()}),e._uU(23," Delete Recipe "),e.qZA()()()()()(),e.TgZ(24,"div",9)(25,"div",2)(26,"h4"),e._uU(27,"Description:"),e.qZA(),e.TgZ(28,"div",10),e._uU(29),e.qZA()()(),e.TgZ(30,"div",1)(31,"div",2)(32,"h4"),e._uU(33,"Ingredients:"),e.qZA(),e.TgZ(34,"ul",11),e.YNc(35,S,2,2,"li",12),e.qZA()()()),2&i&&(e.Q6J("ngIf",n.openModal),e.xp6(3),e.s9C("alt",n.recipe.name),e.Q6J("src",n.recipe.imagePath,e.LSH),e.xp6(4),e.Oqu(n.recipe.name),e.xp6(22),e.hij(" ",n.recipe.description," "),e.xp6(6),e.Q6J("ngForOf",n.recipe.ingredients))},directives:[d.O5,D,y,d.sg],styles:["img[_ngcontent-%COMP%]{border-radius:16px}.dropdown-toggle[_ngcontent-%COMP%]{margin-top:8px}.Description[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.back[_ngcontent-%COMP%]{background-color:red;width:100%;height:100%}"]}),t})();function x(t,o){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Edit recipe"),e.qZA())}function O(t,o){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Add recipe"),e.qZA())}function q(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"label",23),e._uU(3,"Name"),e.qZA(),e._UZ(4,"input",24),e.qZA(),e.TgZ(5,"div",25)(6,"label",26),e._uU(7,"Amount"),e.qZA(),e._UZ(8,"input",27),e.qZA(),e.TgZ(9,"div",28)(10,"button",6),e.NdJ("click",function(){const p=e.CHM(i).index;return e.oxw().handleDeleteIngredient(p)}),e._uU(11," X "),e.qZA()()()}2&t&&e.Q6J("formGroupName",o.index)}let h=(()=>{class t{constructor(i,n,c,p,l){this._route=i,this._router=n,this._recipesService=c,this._dataStorageService=p,this._alertService=l,this.editMode=!1}ngOnInit(){this._route.params.subscribe(i=>{this.id=+i.id,this.editMode=null!=i.id,this._initForm()})}_initForm(){let i="",n="",c="",p=new r.Oe([]);if(this.editMode){const l=this._recipesService.getRecipeByIndex(this.id);if(i=l.name,n=l.imagePath,c=l.description,l.ingredients)for(let f of l.ingredients)p.push(new r.cw({name:new r.NI(f.name,r.kI.required),amount:new r.NI(f.amount,[r.kI.required,r.kI.pattern(/^[1-9]+[0-9]*$/)])}))}this.recipeForm=new r.cw({name:new r.NI(i,r.kI.required),imagePath:new r.NI(n,r.kI.required),description:new r.NI(c,r.kI.required),ingredients:p})}get controls(){return this.recipeForm.get("ingredients").controls}handleAddIngredient(){let i=new r.cw({name:new r.NI(null,r.kI.required),amount:new r.NI(null,[r.kI.required,r.kI.pattern(/^[1-9]+[0-9]*$/)])});this.recipeForm.get("ingredients").push(i)}handleSubmit(){this.editMode?this._recipesService.updateRecipe(this.id,this.recipeForm.value):this._recipesService.addRecipe(this.recipeForm.value),this._dataStorageService.storeRecipes(),this._alertService.show("Recipes were saved!"),this._router.navigate(["../"],{relativeTo:this._route})}handleCancelEditing(){this._router.navigate(["../"],{relativeTo:this._route})}handleDeleteIngredient(i){this.recipeForm.get("ingredients").removeAt(i)}handleDeleteAllIngredient(){this.recipeForm.get("ingredients").clear()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(s.gz),e.Y36(s.F0),e.Y36(u.v),e.Y36(m.Z),e.Y36(_.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-edit"]],decls:46,vars:6,consts:[[1,"row"],[1,"col-xs-12"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"buttons"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","imagePath"],["type","text","id","imagePath","formControlName","imagePath",1,"form-control"],["imagePath",""],[1,"img-responsive",3,"src"],["for","description"],["type","text","id","description","rows","6","formControlName","description",1,"form-control"],[1,"row","Ingredients"],["formArrayName","ingredients",1,"col-xs-12"],["type","button",1,"btn","btn-primary","Ingredients-Add","Add",3,"click"],["type","button",1,"btn","btn-danger","Ingredients-Delete","Delete",3,"click"],["class","row Ingredients-Ingredient Ingredient",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","Ingredients-Ingredient","Ingredient",3,"formGroupName"],[1,"col-xs-8"],["for","ingredientName"],["id","ingredientName","type","text","formControlName","name",1,"form-control"],[1,"col-xs-3"],["for","ingredientAmount"],["id","ingredientAmount","type","number","formControlName","amount",1,"form-control"],[1,"col-xs-1"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,x,2,0,"h2",2),e.YNc(3,O,2,0,"h2",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return n.handleSubmit()}),e.TgZ(5,"div",0)(6,"div",1)(7,"div",4)(8,"button",5),e._uU(9," Save "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return n.handleCancelEditing()}),e._uU(11," Cancel "),e.qZA()(),e.TgZ(12,"div",0)(13,"div",1)(14,"div",7)(15,"label",8),e._uU(16,"Name"),e.qZA(),e._UZ(17,"input",9),e.qZA()()(),e.TgZ(18,"div",0)(19,"div",1)(20,"div",7)(21,"label",10),e._uU(22,"Image URL"),e.qZA(),e._UZ(23,"input",11,12),e.qZA()()(),e.TgZ(25,"div",0)(26,"div",1),e._UZ(27,"img",13),e.qZA()(),e.TgZ(28,"div",0)(29,"div",1)(30,"div",7)(31,"label",14),e._uU(32,"Description"),e.qZA(),e.TgZ(33,"textarea",15),e._uU(34,"                "),e.qZA()()()(),e.TgZ(35,"div",16)(36,"div",17)(37,"label"),e._uU(38,"Ingredients"),e.qZA(),e.TgZ(39,"div",0)(40,"div",1)(41,"button",18),e.NdJ("click",function(){return n.handleAddIngredient()}),e._uU(42," Add Ingredient "),e.qZA(),e.TgZ(43,"button",19),e.NdJ("click",function(){return n.handleDeleteAllIngredient()}),e._uU(44," Delete All Ingredient "),e.qZA()()(),e.YNc(45,q,12,1,"div",20),e.qZA()()()()()()()),2&i){const c=e.MAs(24);e.xp6(2),e.Q6J("ngIf",n.editMode),e.xp6(1),e.Q6J("ngIf",!n.editMode),e.xp6(1),e.Q6J("formGroup",n.recipeForm),e.xp6(4),e.Q6J("disabled",!n.recipeForm.valid),e.xp6(19),e.Q6J("src",c.value,e.LSH),e.xp6(18),e.Q6J("ngForOf",n.controls)}},directives:[d.O5,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.CE,d.sg,r.x0,r.wV],styles:[".buttons[_ngcontent-%COMP%]{margin-bottom:16px}.buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{margin-right:8px}.Ingredients[_ngcontent-%COMP%]   .Add[_ngcontent-%COMP%], .Ingredients[_ngcontent-%COMP%]   .Delete[_ngcontent-%COMP%]{margin-bottom:20px;margin-right:8px}.Ingredients[_ngcontent-%COMP%]   .Ingredient[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:12px}.form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}img[_ngcontent-%COMP%]{border-radius:16px}"]}),t})(),v=(()=>{class t{constructor(i,n){this._router=i,this._recipesService=n}canActivate(i,n){if(0!==this._recipesService.getRecipes.length)return!0;this._router.navigate(["/recipes"])}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(s.F0),e.LFG(u.v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const U=function(t){return[t]};let k=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-item"]],inputs:{recipeItem:"recipeItem",index:"index"},decls:8,vars:7,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],[1,"image-responsive",2,"max-height","50px",3,"src","alt"]],template:function(i,n){1&i&&(e.TgZ(0,"a",0)(1,"div",1)(2,"h4",2),e._uU(3),e.qZA(),e.TgZ(4,"p",3),e._uU(5),e.qZA()(),e.TgZ(6,"span",4),e._UZ(7,"img",5),e.qZA()()),2&i&&(e.Q6J("routerLink",e.VKq(5,U,n.index)),e.xp6(3),e.Oqu(n.recipeItem.name),e.xp6(2),e.Oqu(n.recipeItem.description),e.xp6(2),e.MGl("alt"," ",n.recipeItem.name,""),e.Q6J("src",n.recipeItem.imagePath,e.LSH))},directives:[s.yS,s.Od],styles:[".list-group-item[_ngcontent-%COMP%]{margin-bottom:8px}"]}),t})();function N(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"...Loading"),e.qZA())}function F(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"You have not any recipes yet"),e.qZA())}function J(t,o){if(1&t&&e._UZ(0,"app-recipe-item",6),2&t){const i=o.$implicit;e.Q6J("index",o.index)("recipeItem",i)}}let P=(()=>{class t{constructor(i,n,c,p){this._recipeService=i,this._dataStorageService=n,this._router=c,this._route=p,this.loading=!1}ngOnInit(){this.loading=!0,this.recipes=this._recipeService.getRecipes,this._subscription=this._recipeService.recipesChanged.subscribe(i=>{this.recipes=i}),this._dataStorageService.fetchRecipes().subscribe(i=>{this.loading=!1,this.recipes=i||[]})}handleAddNewRecipe(){this._router.navigate(["new"],{relativeTo:this._route})}ngOnDestroy(){this._subscription.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(u.v),e.Y36(m.Z),e.Y36(s.F0),e.Y36(s.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-list"]],decls:10,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success",3,"click"],[1,"row","recipes"],[4,"ngIf"],["class","recipeItem",3,"index","recipeItem",4,"ngFor","ngForOf"],[1,"recipeItem",3,"index","recipeItem"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return n.handleAddNewRecipe()}),e._uU(3,"New Recipe"),e.qZA()()(),e._UZ(4,"hr"),e.TgZ(5,"div",3)(6,"div",1),e.YNc(7,N,2,0,"p",4),e.YNc(8,F,2,0,"p",4),e.YNc(9,J,1,2,"app-recipe-item",5),e.qZA()()),2&i&&(e.xp6(7),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",0===n.recipes.length&&!n.loading),e.xp6(1),e.Q6J("ngForOf",n.recipes))},directives:[d.O5,d.sg,k],styles:[".btn[_ngcontent-%COMP%]{margin-right:8px}.recipes[_ngcontent-%COMP%]{margin-bottom:32px}"]}),t})();const Y=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-7","recipeMore"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-recipe-list"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA()())},directives:[P,s.lC],styles:[""]}),t})(),children:[{path:"",component:R,pathMatch:"full",canActivate:[T]},{path:"new",component:h},{path:":id",component:w,canActivate:[v]},{path:":id/edit",component:h,canActivate:[v]}]}];let L=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[s.Bz.forChild(Y)],s.Bz]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[s.Bz,L,r.UX,Z.m]]}),t})()}}]);